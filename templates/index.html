{% extends "base.html" %}
{% block title %}Prem AI Clone{% endblock %}
{% block content %}

<!-- MAIN WRAPPER -->
<div class="flex h-screen overflow-hidden relative">

    <!-- MAIN CHAT -->
    <main class="flex-1 flex flex-col bg-transparent">

        <!-- HEADER -->
        <header class="h-20 flex items-center justify-between
        px-4 md:px-8
        glass border-b border-slate-200 dark:border-slate-800">

            <div class="flex items-center gap-3">

                <h2 class="font-bold text-lg">Prem AI Clone</h2>
            </div>

            <button onclick="exportChatPDF()"
            class="flex items-center gap-2 px-5 py-2.5
            bg-gradient-to-r from-cyan-500 to-blue-600
            text-white rounded-xl shadow-glow
            hover:scale-105 transition">
                Export PDF
            </button>
        </header>

        <!-- CHAT AREA -->
        <div id="chat-box"
            class="flex-1 overflow-y-auto
            p-4 md:p-8
            space-y-6
            max-w-5xl mx-auto w-full
            relative z-10">
        </div>

        <!-- INPUT -->
        <div class="p-4 md:p-6 border-t border-slate-200 dark:border-slate-800 glass">

            <div class="max-w-4xl mx-auto relative">

                <div class="absolute -inset-0.5
                bg-gradient-to-r from-primary to-cyan-500
                rounded-2xl blur opacity-20 pointer-events-none"></div>

                <div class="relative z-20 glass rounded-2xl p-2 flex items-center gap-2">

                    <input id="user-input"
                    type="text"
                    placeholder="Message Prem AI..."
                    class="relative z-10 flex-1 bg-transparent px-4 py-3
                    border-none focus:ring-0
                    text-slate-800 dark:text-slate-100"
                    onkeydown="handleEnter(event)">

                    <button onclick="startMic()"
                    class="w-11 h-11 flex items-center justify-center
                    text-slate-400 hover:text-primary transition">
                        ðŸŽ¤
                    </button>

                    <button onclick="sendMessage()"
                    class="w-11 h-11 bg-primary text-white rounded-xl
                    shadow-glow hover:scale-105 transition">
                        âž¤
                    </button>

                </div>
            </div>
        </div>
    </main>
</div>

    <!-- MIC OVERLAY -->
    <div id="micOverlay"
        class="hidden fixed inset-0 bg-black/30 backdrop-blur
        flex items-center justify-center z-[999]">

        <div class="glass p-12 rounded-3xl shadow-xl text-center">
            <div class="w-20 h-20 bg-primary rounded-full mx-auto
            flex items-center justify-center shadow-glow animate-pulse">
                ðŸŽ¤
            </div>
            <p class="mt-4 font-semibold text-lg">Listening...</p>
            <p class="text-slate-400 text-sm">Speak now</p>
        </div>
    </div>

<!-- PDF LOADER -->
<div id="pdfLoader"
class="hidden fixed inset-0 bg-black/40 flex items-center justify-center z-50">

    <div class="glass p-6 rounded-xl flex items-center gap-3">
        <div class="animate-spin rounded-full h-6 w-6 border-b-2 border-primary"></div>
        Generating PDF...
    </div>
</div>

<script src="{{ url_for('static', filename='js/chat.js') }}"></script>

{% endblock %}